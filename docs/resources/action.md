---
page_title: "ory_action Resource - ory"
subcategory: ""
description: |-
  Manages an Ory Action (webhook) for identity flows.
---

# ory_action (Resource)

Manages an Ory Action (webhook) for identity flows.

Actions allow you to trigger webhooks at specific points in identity flows (login, registration, recovery, settings, verification).

## Example Usage

```terraform
# Post-registration webhook
resource "ory_action" "welcome_email" {
  flow        = "registration"
  timing      = "after"
  auth_method = "password"
  url         = "https://api.example.com/webhooks/welcome"
  method      = "POST"
  body        = <<-JSONNET
    function(ctx) {
      email: ctx.identity.traits.email,
      name: ctx.identity.traits.name,
      created_at: ctx.identity.created_at
    }
  JSONNET
}

# Pre-login validation
resource "ory_action" "validate_login" {
  flow          = "login"
  timing        = "before"
  url           = "https://api.example.com/webhooks/validate"
  method        = "POST"
  can_interrupt = true # Allow webhook to block login
}

# Async audit log (fire and forget)
resource "ory_action" "audit_log" {
  flow            = "settings"
  timing          = "after"
  auth_method     = "password"
  url             = "https://api.example.com/webhooks/audit"
  method          = "POST"
  response_ignore = true
}

# Post-verification sync
resource "ory_action" "sync_verified" {
  flow        = "verification"
  timing      = "after"
  auth_method = "code"
  url         = "https://api.example.com/webhooks/user-verified"
  method      = "POST"
}
```

## Authentication Methods

The `auth_method` attribute specifies which authentication method triggers the webhook. In the Ory Console UI, this is the "Method" selector.

| Value | Description | UI Equivalent |
|-------|-------------|---------------|
| `password` | Password-based authentication (default) | "Password" |
| `oidc` | Social/OIDC authentication (Google, GitHub, etc.) | "Social Sign-In" |
| `code` | One-time code (magic link, OTP) | "Code" |
| `webauthn` | Hardware security keys | "WebAuthn" |
| `passkey` | Passkey authentication | "Passkey" |
| `totp` | Time-based one-time password | "TOTP" |
| `lookup_secret` | Recovery/backup codes | "Backup Codes" |

~> **Note:** `auth_method` is only used for `timing = "after"` webhooks. For `timing = "before"` hooks, the webhook runs before any authentication method.

## Import

Actions use different import formats depending on timing:

**For "after" timing (post-hooks):**
```shell
terraform import ory_action.welcome_email "project_id:flow:after:auth_method:url"
```

**For "before" timing (pre-hooks):**
```shell
terraform import ory_action.validate_login "project_id:flow:before:url"
```

### Examples

```shell
# Import a post-registration password webhook
terraform import ory_action.welcome \
  "550e8400-e29b-41d4-a716-446655440000:registration:after:password:https://api.example.com/webhooks/welcome"

# Import a post-login social (OIDC) webhook
terraform import ory_action.social_login \
  "550e8400-e29b-41d4-a716-446655440000:login:after:oidc:https://api.example.com/webhooks/social"

# Import a pre-login validation webhook (no auth_method needed)
terraform import ory_action.validate \
  "550e8400-e29b-41d4-a716-446655440000:login:before:https://api.example.com/webhooks/validate"
```

### Finding Import Values from Ory Console

1. **project_id**: Settings → General → Project ID
2. **flow**: The flow type (login, registration, recovery, settings, verification)
3. **timing**: "before" or "after"
4. **auth_method** (for "after" only): password, oidc, code, webauthn, passkey, totp, lookup_secret
5. **url**: The exact webhook URL - must match exactly including protocol and trailing slashes

### Troubleshooting Import Errors

If you see "Cannot import non-existent remote object", the import will show a warning listing webhooks found at that location. This helps you find the correct URL and auth_method.

Common issues:
- **URL mismatch**: URLs must match exactly, including `https://` and any trailing `/`
- **Wrong auth_method**: UI-created actions default to "password" if you didn't explicitly select one
- **Wrong timing**: Check if the webhook is a pre-hook (before) or post-hook (after)

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `flow` (String) Identity flow to hook into (login, registration, recovery, settings, verification).
- `timing` (String) When to trigger: 'before' (pre-hook) or 'after' (post-hook).
- `url` (String) Webhook URL to call.

### Optional

- `auth_method` (String) Authentication method that triggers the webhook. In the Ory Console UI, this is the "Method" selector. Valid values: `password` (default), `oidc` (social login), `code` (magic link/OTP), `webauthn`, `passkey`, `totp`, `lookup_secret`. Only used for `timing = "after"` webhooks.
- `body` (String) Jsonnet template for the request body.
- `can_interrupt` (Boolean) Allow webhook to interrupt/block the flow (default: false).
- `method` (String) HTTP method (default: POST).
- `project_id` (String) Project ID. If not set, uses provider's project_id.
- `response_ignore` (Boolean) Run webhook async without waiting (default: false).
- `response_parse` (Boolean) Parse response to modify identity (default: false).

### Read-Only

- `id` (String) Resource ID.
