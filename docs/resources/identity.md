---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ory_identity Resource - ory"
subcategory: ""
description: |-
  Manages an Ory Network identity (user).
  Identities represent users in your application. Each identity has traits
  (profile data) defined by an identity schema.
  Required Provider Configuration
  This resource requires the following provider configuration:
  
  provider "ory" {
    project_api_key = var.ory_project_api_key  # or ORY_PROJECT_API_KEY env var
    project_slug    = var.ory_project_slug     # or ORY_PROJECT_SLUG env var
  }
  
  Or via environment variables:
  
  export ORY_PROJECT_API_KEY="ory_pat_..."
  export ORY_PROJECT_SLUG="your-project-slug"
  
  Schema ID
  The schema_id attribute specifies which identity schema defines the structure of the identity's traits:
  Use the default schema: Most projects have a default schema (often named default)Reference a Terraform-managed schema: ory_identity_schema.customer.idUse a preset (must be enabled first): preset://email or preset://username
  ~> Note: Preset schemas must be enabled in your Ory project before use. If you get a 500 error with a preset, it may not be enabled. Check your project's identity schema settings or use a custom schema.
  Example Usage
  
  # Identity using the default schema
  resource "ory_identity" "user" {
    schema_id = "default"
  
    traits = jsonencode({
      email = "user@example.com"
    })
  }
  
  # Identity with password
  resource "ory_identity" "user_with_password" {
    schema_id = "default"
  
    traits = jsonencode({
      email = "user@example.com"
    })
  
    password = var.user_password  # Use a variable, never hardcode
  
    metadata_public = jsonencode({
      role = "user"
    })
  }
  
  # Identity using a custom Terraform-managed schema
  resource "ory_identity" "customer" {
    schema_id = ory_identity_schema.customer.id
  
    traits = jsonencode({
      email = "customer@example.com"
    })
  }
  
  Import
  Identities can be imported using their ID:
  
  terraform import ory_identity.user <identity-id>
  
  Note: If the identity is deleted outside of Terraform (e.g., via UI or API),
  the next terraform plan will detect this and remove it from state.
---

# ory_identity (Resource)

Manages an Ory Network identity (user).

Identities represent users in your application. Each identity has traits
(profile data) defined by an identity schema.

## Required Provider Configuration

This resource requires the following provider configuration:

```hcl
provider "ory" {
  project_api_key = var.ory_project_api_key  # or ORY_PROJECT_API_KEY env var
  project_slug    = var.ory_project_slug     # or ORY_PROJECT_SLUG env var
}
```

Or via environment variables:

```bash
export ORY_PROJECT_API_KEY="ory_pat_..."
export ORY_PROJECT_SLUG="your-project-slug"
```

## Schema ID

The `schema_id` attribute specifies which identity schema defines the structure of the identity's traits:

- **Use the default schema**: Most projects have a default schema (often named `default`)
- **Reference a Terraform-managed schema**: `ory_identity_schema.customer.id`
- **Use a preset** (must be enabled first): `preset://email` or `preset://username`

~> **Note:** Preset schemas must be enabled in your Ory project before use. If you get a 500 error with a preset, it may not be enabled. Check your project's identity schema settings or use a custom schema.

## Example Usage

```hcl
# Identity using the default schema
resource "ory_identity" "user" {
  schema_id = "default"

  traits = jsonencode({
    email = "user@example.com"
  })
}

# Identity with password
resource "ory_identity" "user_with_password" {
  schema_id = "default"

  traits = jsonencode({
    email = "user@example.com"
  })

  password = var.user_password  # Use a variable, never hardcode

  metadata_public = jsonencode({
    role = "user"
  })
}

# Identity using a custom Terraform-managed schema
resource "ory_identity" "customer" {
  schema_id = ory_identity_schema.customer.id

  traits = jsonencode({
    email = "customer@example.com"
  })
}
```

## Import

Identities can be imported using their ID:

```shell
terraform import ory_identity.user <identity-id>
```

**Note**: If the identity is deleted outside of Terraform (e.g., via UI or API),
the next `terraform plan` will detect this and remove it from state.

## Example Usage

```terraform
# Basic identity using the project's default schema
resource "ory_identity" "basic_user" {
  schema_id = "default"
  traits = jsonencode({
    email = "user@example.com"
  })
}

# Identity with password
resource "ory_identity" "user_with_password" {
  schema_id = "default"
  traits = jsonencode({
    email = "secure-user@example.com"
  })
  password = var.user_password
  state    = "active"
}

# Identity with custom schema and metadata
resource "ory_identity" "customer" {
  schema_id = ory_identity_schema.customer.id
  traits = jsonencode({
    email = "customer@example.com"
    name = {
      first = "John"
      last  = "Doe"
    }
  })
  metadata_public = jsonencode({
    tier = "premium"
  })
  metadata_admin = jsonencode({
    internal_id = "cust-12345"
    sales_rep   = "jane@company.com"
  })
}

variable "user_password" {
  type      = string
  sensitive = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `traits` (String) Identity traits as JSON string. The structure depends on your identity schema.

### Optional

- `metadata_admin` (String, Sensitive) Admin metadata as JSON string. Only visible to admins.
- `metadata_public` (String) Public metadata as JSON string. Visible to the identity.
- `password` (String, Sensitive) Password for the identity. Write-only, not returned on read.
- `schema_id` (String) Identity schema ID. Use 'default' for the project's default schema, or reference a custom schema.
- `state` (String) Identity state: active or inactive.

### Read-Only

- `id` (String) The unique identifier of the identity.
