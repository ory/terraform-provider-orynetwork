---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ory_identity Resource - ory"
subcategory: ""
description: |-
  Manages an Ory Network identity (user).
  Identities represent users in your application. Each identity has traits
  (profile data) defined by an identity schema.
  Required Provider Configuration
  This resource requires the following provider configuration:
  
  provider "ory" {
    project_api_key = var.ory_project_api_key  # or ORY_PROJECT_API_KEY env var
    project_slug    = var.ory_project_slug     # or ORY_PROJECT_SLUG env var
  }
  
  Or via environment variables:
  
  export ORY_PROJECT_API_KEY="ory_pat_..."
  export ORY_PROJECT_SLUG="your-project-slug"
  
  Example Usage
  
  # Basic identity with email
  resource "ory_identity" "user" {
    schema_id = "preset://email"
  
    traits = jsonencode({
      email = "user@example.com"
    })
  }
  
  # Identity with password (for password-based authentication)
  resource "ory_identity" "user_with_password" {
    schema_id = "preset://email"
  
    traits = jsonencode({
      email = "user@example.com"
    })
  
    password = var.user_password  # Use a variable, never hardcode
  
    metadata_public = jsonencode({
      role = "user"
    })
  }
  
  Import
  Identities can be imported using their ID:
  
  terraform import ory_identity.user <identity-id>
  
  Note: If the identity is deleted outside of Terraform (e.g., via UI or API),
  the next terraform plan will detect this and remove it from state.
---

# ory_identity (Resource)

Manages an Ory Network identity (user).

Identities represent users in your application. Each identity has traits
(profile data) defined by an identity schema.

## Required Provider Configuration

This resource requires the following provider configuration:

```hcl
provider "ory" {
  project_api_key = var.ory_project_api_key  # or ORY_PROJECT_API_KEY env var
  project_slug    = var.ory_project_slug     # or ORY_PROJECT_SLUG env var
}
```

Or via environment variables:

```bash
export ORY_PROJECT_API_KEY="ory_pat_..."
export ORY_PROJECT_SLUG="your-project-slug"
```

## Example Usage

```hcl
# Basic identity with email
resource "ory_identity" "user" {
  schema_id = "preset://email"

  traits = jsonencode({
    email = "user@example.com"
  })
}

# Identity with password (for password-based authentication)
resource "ory_identity" "user_with_password" {
  schema_id = "preset://email"

  traits = jsonencode({
    email = "user@example.com"
  })

  password = var.user_password  # Use a variable, never hardcode

  metadata_public = jsonencode({
    role = "user"
  })
}
```

## Import

Identities can be imported using their ID:

```shell
terraform import ory_identity.user <identity-id>
```

**Note**: If the identity is deleted outside of Terraform (e.g., via UI or API),
the next `terraform plan` will detect this and remove it from state.

## Example Usage

```terraform
# Basic identity with default email schema
resource "ory_identity" "basic_user" {
  schema_id = "preset://email"
  traits = jsonencode({
    email = "user@example.com"
  })
}

# Identity with password
resource "ory_identity" "user_with_password" {
  schema_id = "preset://email"
  traits = jsonencode({
    email = "secure-user@example.com"
  })
  password = var.user_password
  state    = "active"
}

# Identity with custom schema and metadata
resource "ory_identity" "customer" {
  schema_id = ory_identity_schema.customer.id
  traits = jsonencode({
    email = "customer@example.com"
    name = {
      first = "John"
      last  = "Doe"
    }
  })
  metadata_public = jsonencode({
    tier = "premium"
  })
  metadata_admin = jsonencode({
    internal_id = "cust-12345"
    sales_rep   = "jane@company.com"
  })
}

variable "user_password" {
  type      = string
  sensitive = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `traits` (String) Identity traits as JSON string. The structure depends on your identity schema.

### Optional

- `metadata_admin` (String, Sensitive) Admin metadata as JSON string. Only visible to admins.
- `metadata_public` (String) Public metadata as JSON string. Visible to the identity.
- `password` (String, Sensitive) Password for the identity. Write-only, not returned on read.
- `schema_id` (String) Identity schema ID (e.g., 'preset://email').
- `state` (String) Identity state: active or inactive.

### Read-Only

- `id` (String) The unique identifier of the identity.
