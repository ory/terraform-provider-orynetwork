---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ory_relationship Resource - ory"
subcategory: ""
description: |-
  Manages an Ory Keto relationship tuple for fine-grained authorization.
  Relationships are the foundation of Ory Keto's permission system. They define
  who (subject) has what relation to which resource (object) in a namespace.
  Relationship Tuple Structure
  A relationship tuple consists of:
  namespace: The type of resource (e.g., "documents", "folders")object: The specific resource IDrelation: The type of relationship (e.g., "viewer", "editor", "owner")subject: Either a user ID or another relationship tuple (subject set)
  Example Usage
  Simple User Permission
  
  resource "ory_relationship" "user_can_view" {
    namespace  = "documents"
    object     = "doc-123"
    relation   = "viewer"
    subject_id = "user-456"
  }
  
  Subject Set (Inherited Permission)
  Grant all editors of a folder access to view documents in that folder:
  
  resource "ory_relationship" "editors_can_view" {
    namespace             = "documents"
    object                = "doc-123"
    relation              = "viewer"
    subject_set_namespace = "folders"
    subject_set_object    = "folder-789"
    subject_set_relation  = "editor"
  }
  
  This means: anyone who is an "editor" of "folder-789" in the "folders" namespace
  is automatically a "viewer" of "doc-123" in the "documents" namespace.
  Note
  You must configure Ory Keto namespaces and permissions in your project
  configuration before creating relationships. Use ory_project_config or
  configure via the Ory Console.
---

# ory_relationship (Resource)

Manages an Ory Keto relationship tuple for fine-grained authorization.

Relationships are the foundation of Ory Keto's permission system. They define
who (subject) has what relation to which resource (object) in a namespace.

## Relationship Tuple Structure

A relationship tuple consists of:
- **namespace**: The type of resource (e.g., "documents", "folders")
- **object**: The specific resource ID
- **relation**: The type of relationship (e.g., "viewer", "editor", "owner")
- **subject**: Either a user ID or another relationship tuple (subject set)

## Example Usage

### Simple User Permission

```hcl
resource "ory_relationship" "user_can_view" {
  namespace  = "documents"
  object     = "doc-123"
  relation   = "viewer"
  subject_id = "user-456"
}
```

### Subject Set (Inherited Permission)

Grant all editors of a folder access to view documents in that folder:

```hcl
resource "ory_relationship" "editors_can_view" {
  namespace             = "documents"
  object                = "doc-123"
  relation              = "viewer"
  subject_set_namespace = "folders"
  subject_set_object    = "folder-789"
  subject_set_relation  = "editor"
}
```

This means: anyone who is an "editor" of "folder-789" in the "folders" namespace
is automatically a "viewer" of "doc-123" in the "documents" namespace.

## Note

You must configure Ory Keto namespaces and permissions in your project
configuration before creating relationships. Use `ory_project_config` or
configure via the Ory Console.

## Example Usage

```terraform
# Direct user permission: user-123 can view doc-456
resource "ory_relationship" "user_view_doc" {
  namespace  = "documents"
  object     = "doc-456"
  relation   = "viewer"
  subject_id = "user-123"
}

# User is member of a group
resource "ory_relationship" "user_in_group" {
  namespace  = "groups"
  object     = "engineering"
  relation   = "member"
  subject_id = "user-123"
}

# Group members can edit project (subject set)
resource "ory_relationship" "group_edit_project" {
  namespace             = "projects"
  object                = "project-abc"
  relation              = "editor"
  subject_set_namespace = "groups"
  subject_set_object    = "engineering"
  subject_set_relation  = "member"
}

# Hierarchical permissions: folder viewers can view documents in folder
resource "ory_relationship" "folder_viewer_inheritance" {
  namespace             = "documents"
  object                = "doc-789"
  relation              = "viewer"
  subject_set_namespace = "folders"
  subject_set_object    = "folder-123"
  subject_set_relation  = "viewer"
}

# Complete RBAC example
locals {
  users = {
    alice = "user-alice"
    bob   = "user-bob"
  }

  docs = {
    public  = "public-doc"
    private = "private-doc"
  }
}

# Alice owns the private doc
resource "ory_relationship" "alice_owns_private" {
  namespace  = "documents"
  object     = local.docs.private
  relation   = "owner"
  subject_id = local.users.alice
}

# Bob can view the public doc
resource "ory_relationship" "bob_views_public" {
  namespace  = "documents"
  object     = local.docs.public
  relation   = "viewer"
  subject_id = local.users.bob
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `namespace` (String) The namespace of the relationship (e.g., 'documents', 'folders').
- `object` (String) The object ID in the namespace.
- `relation` (String) The relation type (e.g., 'viewer', 'editor', 'owner').

### Optional

- `subject_id` (String) The subject ID (user ID). Mutually exclusive with subject_set_* attributes.
- `subject_set_namespace` (String) The namespace for a subject set. Use with subject_set_object and subject_set_relation.
- `subject_set_object` (String) The object ID for a subject set.
- `subject_set_relation` (String) The relation for a subject set.

### Read-Only

- `id` (String) Internal Terraform ID (composite of namespace:object#relation@subject).
